<div class="container">
  <div class="d-flex justify-content-center mt-5">
    <div class="card shadow" style="width: 36rem;">
      <div class="card-body d-flex flex-column align-items-center">
        <h3 class="card-title my-3">URL Shortener</h3>
        <div class="my-4">
          <img src="images\image.png" style="width: 10rem;">
        </div>
        <div>
          {{#if shortened_url}}
          <h4>
            Success! please use this link:
          </h4>
          {{/if}}
        </div>
        <div class="my-2" style="width: 20rem;">
          <form action="/" method="POST">
            <input type="url" class="form-control" name="originalUrl" placeholder="Input url here..." required
              id="linkToCopy" {{#if shortened_url}}value="{{shortened_url}}" disabled {{/if}}>

            <!-- 用是否有shortened_url回傳當判斷去render不同的按鈕 -->
            {{#if shortened_url}}
            <!--一鍵複製功能的按鈕 JavaScripts在最底-->
            <div class="text-center mt-3 ">
              <button type="button" class="btn btn-primary" id="copyBtn">Copy</button>
            </div>
            <div class="text-center">
              <a href="/" type="button" class="btn btn-link">shorten another url</a>
            </div>
            {{else}}
            <div class="text-center mt-3 ">
              <button type="submit" class="btn btn-primary">Submit</button>
            </div>
            {{/if}}

          </form>
        </div>
      </div>
    </div>
  </div>
</div>

<!--一鍵複製功能的script-->
<script>
  let copyBtn = document.getElementById('copyBtn');
  copyBtn.addEventListener('click', () => {
    let textToCopy = document.getElementById('linkToCopy').value;
    if (navigator.clipboard) {
      navigator.clipboard.writeText(textToCopy)
    } else {
      console.log('Browser Not compatible')
    }
  })
</script>